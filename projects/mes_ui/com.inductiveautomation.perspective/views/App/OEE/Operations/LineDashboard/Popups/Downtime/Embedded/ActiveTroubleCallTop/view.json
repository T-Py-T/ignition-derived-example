{
  "custom": {
    "CurrentCall": "Production",
    "CurrentCallMode": 1,
    "CurrentCallTimeStamp": null,
    "Modes": [
      {
        "Description": "Disabled",
        "ReasonCode": 0
      },
      {
        "Description": "Production",
        "ReasonCode": 1
      },
      {
        "Description": "Idle",
        "ReasonCode": 3
      },
      {
        "Description": "Other",
        "ReasonCode": 5
      },
      {
        "Description": "Maintenance Called",
        "ReasonCode": 10
      },
      {
        "Description": "Maintenace In Progress",
        "ReasonCode": 11
      },
      {
        "Description": "Maintenace Left",
        "ReasonCode": 12
      },
      {
        "Description": "Quality Called",
        "ReasonCode": 20
      },
      {
        "Description": "Quality In Progress",
        "ReasonCode": 21
      },
      {
        "Description": "Quality In Left",
        "ReasonCode": 22
      },
      {
        "Description": "Team Lead Called",
        "ReasonCode": 30
      },
      {
        "Description": "Team Lead In Progress",
        "ReasonCode": 31
      },
      {
        "Description": "Team Lead Left",
        "ReasonCode": 32
      },
      {
        "Description": "Changeover",
        "ReasonCode": 2
      },
      {
        "Description": "M1000",
        "ReasonCode": 237
      }
    ]
  },
  "params": {
    "Data": {
      "$": [
        "ds",
        201,
        1686766341680
      ],
      "$columns": [
        {
          "data": [],
          "name": "ModeEventID",
          "type": "Integer"
        },
        {
          "data": [],
          "name": "ReasonID",
          "type": "Integer"
        },
        {
          "data": [],
          "name": "Sequence",
          "type": "Integer"
        },
        {
          "data": [],
          "name": "DateCreated",
          "type": "Date"
        },
        {
          "data": [],
          "name": "UserName",
          "type": "String"
        },
        {
          "data": [],
          "name": "Notes",
          "type": "String"
        }
      ]
    },
    "EqPath": ""
  },
  "propConfig": {
    "custom.CurrentCall": {
      "binding": {
        "config": {
          "path": "view.custom.CurrentCallMode"
        },
        "transforms": [
          {
            "code": "\tmodes \u003d self.session.custom.Modes\n\t\n\tfor mode in modes:\n\t\tif value in mode.values(): return mode[\u0027Description\u0027]",
            "type": "script"
          }
        ],
        "type": "property"
      },
      "persistent": true
    },
    "custom.CurrentCallMode": {
      "binding": {
        "config": {
          "expression": "runScript(\u0027mes.oee.mode.getMode\u0027, 0, {session.custom.EqPath})"
        },
        "type": "expr"
      },
      "persistent": true
    },
    "custom.CurrentCallTimeStamp": {
      "binding": {
        "config": {
          "fallbackDelay": 2.5,
          "mode": "indirect",
          "references": {
            "1": "{view.params.EqPath}"
          },
          "tagPath": "{1}/scadaControlled/mode.Timestamp"
        },
        "type": "tag"
      },
      "persistent": true
    },
    "custom.Modes": {
      "binding": {
        "config": {
          "path": "session.custom.Modes"
        },
        "type": "property"
      },
      "persistent": true
    },
    "params.Data": {
      "paramDirection": "input",
      "persistent": true
    },
    "params.EqPath": {
      "paramDirection": "input",
      "persistent": true
    },
    "params.InProgress": {
      "paramDirection": "inout",
      "persistent": false
    }
  },
  "props": {
    "defaultSize": {
      "height": 94,
      "width": 514
    }
  },
  "root": {
    "children": [
      {
        "children": [
          {
            "meta": {
              "name": "Label"
            },
            "position": {
              "grow": 1
            },
            "props": {
              "style": {
                "classes": "Cards/Common/CardText"
              },
              "text": "Active Trouble Call"
            },
            "type": "ia.display.label"
          },
          {
            "meta": {
              "name": "Value"
            },
            "position": {
              "basis": "75px",
              "display": false,
              "grow": 1,
              "shrink": 0
            },
            "propConfig": {
              "props.style.backgroundColor": {
                "binding": {
                  "config": {
                    "path": "view.params.State"
                  },
                  "enabled": false,
                  "transforms": [
                    {
                      "fallback": "",
                      "inputType": "scalar",
                      "mappings": [
                        {
                          "input": "fail",
                          "output": "--error"
                        }
                      ],
                      "outputType": "scalar",
                      "type": "map"
                    }
                  ],
                  "type": "property"
                }
              },
              "props.text": {
                "binding": {
                  "config": {
                    "path": "view.custom.Target"
                  },
                  "transforms": [
                    {
                      "formatType": "numeric",
                      "formatValue": "percent",
                      "type": "format"
                    }
                  ],
                  "type": "property"
                }
              }
            },
            "props": {
              "style": {
                "backgroundColor": "",
                "classes": "Cards/Common/CardValue"
              },
              "textStyle": {
                "fontWeight": "bold",
                "textAlign": "right"
              }
            },
            "type": "ia.display.label"
          },
          {
            "meta": {
              "name": "EmbeddedView"
            },
            "position": {
              "grow": 1
            },
            "propConfig": {
              "props.params.value": {
                "binding": {
                  "config": {
                    "path": "view.custom.CurrentCall"
                  },
                  "type": "property"
                }
              }
            },
            "props": {
              "path": "App/OEE/Operations/LineDashboard/Popups/Downtime/Embedded/TroubleCallStatus"
            },
            "type": "ia.display.view"
          }
        ],
        "meta": {
          "name": "ActiveCall"
        },
        "position": {
          "basis": "20px",
          "shrink": 0
        },
        "props": {
          "style": {
            "marginBottom": "2px",
            "overflow": "hidden"
          },
          "wrap": "wrap"
        },
        "type": "ia.container.flex"
      },
      {
        "children": [
          {
            "meta": {
              "name": "Label"
            },
            "position": {
              "grow": 1
            },
            "props": {
              "style": {
                "classes": "Cards/Common/CardText"
              },
              "text": "Sub-Reason"
            },
            "type": "ia.display.label"
          },
          {
            "meta": {
              "name": "Value"
            },
            "position": {
              "shrink": 0
            },
            "propConfig": {
              "props.text": {
                "binding": {
                  "config": {
                    "path": "view.custom.GoodCount"
                  },
                  "enabled": false,
                  "type": "property"
                }
              }
            },
            "props": {
              "style": {
                "classes": "Cards/Common/CardValue"
              },
              "text": "A"
            },
            "type": "ia.display.label"
          }
        ],
        "meta": {
          "name": "SubReason"
        },
        "position": {
          "basis": "20px",
          "display": false,
          "shrink": 0
        },
        "props": {
          "style": {
            "classes": "TextFields/TextFieldAlternate",
            "overflow": "hidden"
          },
          "wrap": "wrap"
        },
        "type": "ia.container.flex"
      },
      {
        "children": [
          {
            "meta": {
              "name": "Label"
            },
            "position": {
              "grow": 1
            },
            "props": {
              "style": {
                "classes": "Cards/Common/CardText"
              },
              "text": "Date Time"
            },
            "type": "ia.display.label"
          },
          {
            "meta": {
              "name": "Value"
            },
            "position": {
              "grow": 1,
              "shrink": 0
            },
            "propConfig": {
              "props.text": {
                "binding": {
                  "config": {
                    "path": "view.custom.CurrentCallTimeStamp"
                  },
                  "transforms": [
                    {
                      "formatType": "datetime",
                      "formatValue": {
                        "date": "medium",
                        "time": "medium"
                      },
                      "type": "format"
                    }
                  ],
                  "type": "property"
                }
              }
            },
            "props": {
              "style": {
                "classes": "Cards/Common/Boolean"
              },
              "textStyle": {
                "fontWeight": "bold",
                "textAlign": "right"
              }
            },
            "type": "ia.display.label"
          }
        ],
        "meta": {
          "name": "DateTime"
        },
        "position": {
          "basis": "20px",
          "shrink": 0
        },
        "props": {
          "style": {
            "classes": "Global/MarginBottom TextFields/TextFieldAlternate",
            "overflow": "hidden"
          },
          "wrap": "wrap"
        },
        "type": "ia.container.flex"
      },
      {
        "children": [
          {
            "meta": {
              "name": "Label"
            },
            "position": {
              "display": false,
              "grow": 1
            },
            "props": {
              "style": {
                "classes": "Cards/Common/CardText"
              },
              "text": "Rejects"
            },
            "type": "ia.display.label"
          },
          {
            "meta": {
              "name": "Value"
            },
            "position": {
              "display": false,
              "grow": 1,
              "shrink": 0
            },
            "propConfig": {
              "props.text": {
                "binding": {
                  "config": {
                    "path": "view.custom.Rejects"
                  },
                  "transforms": [
                    {
                      "formatType": "numeric",
                      "formatValue": "number",
                      "type": "format"
                    }
                  ],
                  "type": "property"
                }
              }
            },
            "props": {
              "style": {
                "classes": "Cards/Common/Boolean"
              },
              "textStyle": {
                "fontWeight": "bold",
                "textAlign": "right"
              }
            },
            "type": "ia.display.label"
          },
          {
            "meta": {
              "name": "Table"
            },
            "position": {
              "basis": "400px",
              "grow": 1
            },
            "propConfig": {
              "props.data": {
                "binding": {
                  "config": {
                    "path": "view.params.Data"
                  },
                  "type": "property"
                }
              }
            },
            "props": {
              "columns": [
                {
                  "align": "center",
                  "boolean": "checkbox",
                  "dateFormat": "MM/DD/YYYY",
                  "editable": false,
                  "field": "ModeEventID",
                  "filter": {
                    "boolean": {
                      "condition": ""
                    },
                    "date": {
                      "condition": "",
                      "value": ""
                    },
                    "enabled": false,
                    "number": {
                      "condition": "",
                      "value": ""
                    },
                    "string": {
                      "condition": "",
                      "value": ""
                    },
                    "visible": "on-hover"
                  },
                  "footer": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "header": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "justify": "auto",
                  "nullFormat": {
                    "includeNullStrings": false,
                    "nullFormatValue": "",
                    "strict": false
                  },
                  "number": "value",
                  "numberFormat": "0,0.##",
                  "progressBar": {
                    "bar": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "max": 100,
                    "min": 0,
                    "track": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "value": {
                      "enabled": true,
                      "format": "0,0.##",
                      "justify": "center",
                      "style": {
                        "classes": ""
                      }
                    }
                  },
                  "render": "auto",
                  "resizable": true,
                  "sort": "none",
                  "sortable": true,
                  "strictWidth": false,
                  "style": {
                    "classes": ""
                  },
                  "toggleSwitch": {
                    "color": {
                      "selected": "",
                      "unselected": ""
                    }
                  },
                  "viewParams": {},
                  "viewPath": "",
                  "visible": false,
                  "width": ""
                },
                {
                  "align": "center",
                  "boolean": "checkbox",
                  "dateFormat": "MM/DD/YYYY",
                  "editable": false,
                  "field": "ReasonID",
                  "filter": {
                    "boolean": {
                      "condition": ""
                    },
                    "date": {
                      "condition": "",
                      "value": ""
                    },
                    "enabled": false,
                    "number": {
                      "condition": "",
                      "value": ""
                    },
                    "string": {
                      "condition": "",
                      "value": ""
                    },
                    "visible": "on-hover"
                  },
                  "footer": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "header": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "justify": "auto",
                  "nullFormat": {
                    "includeNullStrings": false,
                    "nullFormatValue": "",
                    "strict": false
                  },
                  "number": "value",
                  "numberFormat": "0,0.##",
                  "progressBar": {
                    "bar": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "max": 100,
                    "min": 0,
                    "track": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "value": {
                      "enabled": true,
                      "format": "0,0.##",
                      "justify": "center",
                      "style": {
                        "classes": ""
                      }
                    }
                  },
                  "render": "auto",
                  "resizable": true,
                  "sort": "none",
                  "sortable": true,
                  "strictWidth": false,
                  "style": {
                    "classes": ""
                  },
                  "toggleSwitch": {
                    "color": {
                      "selected": "",
                      "unselected": ""
                    }
                  },
                  "viewParams": {},
                  "viewPath": "",
                  "visible": true,
                  "width": ""
                },
                {
                  "align": "center",
                  "boolean": "checkbox",
                  "dateFormat": "MM/DD/YYYY",
                  "editable": false,
                  "field": "Sequence",
                  "filter": {
                    "boolean": {
                      "condition": ""
                    },
                    "date": {
                      "condition": "",
                      "value": ""
                    },
                    "enabled": false,
                    "number": {
                      "condition": "",
                      "value": ""
                    },
                    "string": {
                      "condition": "",
                      "value": ""
                    },
                    "visible": "on-hover"
                  },
                  "footer": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "header": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "justify": "auto",
                  "nullFormat": {
                    "includeNullStrings": false,
                    "nullFormatValue": "",
                    "strict": false
                  },
                  "number": "value",
                  "numberFormat": "0,0.##",
                  "progressBar": {
                    "bar": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "max": 100,
                    "min": 0,
                    "track": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "value": {
                      "enabled": true,
                      "format": "0,0.##",
                      "justify": "center",
                      "style": {
                        "classes": ""
                      }
                    }
                  },
                  "render": "auto",
                  "resizable": true,
                  "sort": "none",
                  "sortable": true,
                  "strictWidth": false,
                  "style": {
                    "classes": ""
                  },
                  "toggleSwitch": {
                    "color": {
                      "selected": "",
                      "unselected": ""
                    }
                  },
                  "viewParams": {},
                  "viewPath": "",
                  "visible": false,
                  "width": ""
                },
                {
                  "align": "center",
                  "boolean": "checkbox",
                  "dateFormat": "MM/DD/YYYY",
                  "editable": false,
                  "field": "DateCreated",
                  "filter": {
                    "boolean": {
                      "condition": ""
                    },
                    "date": {
                      "condition": "",
                      "value": ""
                    },
                    "enabled": false,
                    "number": {
                      "condition": "",
                      "value": ""
                    },
                    "string": {
                      "condition": "",
                      "value": ""
                    },
                    "visible": "on-hover"
                  },
                  "footer": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "header": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": "Date"
                  },
                  "justify": "auto",
                  "nullFormat": {
                    "includeNullStrings": false,
                    "nullFormatValue": "",
                    "strict": false
                  },
                  "number": "value",
                  "numberFormat": "0,0.##",
                  "progressBar": {
                    "bar": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "max": 100,
                    "min": 0,
                    "track": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "value": {
                      "enabled": true,
                      "format": "0,0.##",
                      "justify": "center",
                      "style": {
                        "classes": ""
                      }
                    }
                  },
                  "render": "auto",
                  "resizable": true,
                  "sort": "none",
                  "sortable": true,
                  "strictWidth": false,
                  "style": {
                    "classes": ""
                  },
                  "toggleSwitch": {
                    "color": {
                      "selected": "",
                      "unselected": ""
                    }
                  },
                  "viewParams": {},
                  "viewPath": "",
                  "visible": false,
                  "width": ""
                },
                {
                  "align": "center",
                  "boolean": "checkbox",
                  "dateFormat": "MM/DD/YYYY",
                  "editable": false,
                  "field": "UserName",
                  "filter": {
                    "boolean": {
                      "condition": ""
                    },
                    "date": {
                      "condition": "",
                      "value": ""
                    },
                    "enabled": false,
                    "number": {
                      "condition": "",
                      "value": ""
                    },
                    "string": {
                      "condition": "",
                      "value": ""
                    },
                    "visible": "on-hover"
                  },
                  "footer": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "header": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": "User"
                  },
                  "justify": "auto",
                  "nullFormat": {
                    "includeNullStrings": false,
                    "nullFormatValue": "",
                    "strict": false
                  },
                  "number": "value",
                  "numberFormat": "0,0.##",
                  "progressBar": {
                    "bar": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "max": 100,
                    "min": 0,
                    "track": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "value": {
                      "enabled": true,
                      "format": "0,0.##",
                      "justify": "center",
                      "style": {
                        "classes": ""
                      }
                    }
                  },
                  "render": "auto",
                  "resizable": true,
                  "sort": "none",
                  "sortable": true,
                  "strictWidth": false,
                  "style": {
                    "classes": ""
                  },
                  "toggleSwitch": {
                    "color": {
                      "selected": "",
                      "unselected": ""
                    }
                  },
                  "viewParams": {},
                  "viewPath": "",
                  "visible": true,
                  "width": ""
                },
                {
                  "align": "center",
                  "boolean": "checkbox",
                  "dateFormat": "MM/DD/YYYY",
                  "editable": false,
                  "field": "Notes",
                  "filter": {
                    "boolean": {
                      "condition": ""
                    },
                    "date": {
                      "condition": "",
                      "value": ""
                    },
                    "enabled": false,
                    "number": {
                      "condition": "",
                      "value": ""
                    },
                    "string": {
                      "condition": "",
                      "value": ""
                    },
                    "visible": "on-hover"
                  },
                  "footer": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "header": {
                    "align": "center",
                    "justify": "left",
                    "style": {
                      "classes": ""
                    },
                    "title": ""
                  },
                  "justify": "auto",
                  "nullFormat": {
                    "includeNullStrings": false,
                    "nullFormatValue": "",
                    "strict": false
                  },
                  "number": "value",
                  "numberFormat": "0,0.##",
                  "progressBar": {
                    "bar": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "max": 100,
                    "min": 0,
                    "track": {
                      "color": "",
                      "style": {
                        "classes": ""
                      }
                    },
                    "value": {
                      "enabled": true,
                      "format": "0,0.##",
                      "justify": "center",
                      "style": {
                        "classes": ""
                      }
                    }
                  },
                  "render": "auto",
                  "resizable": true,
                  "sort": "none",
                  "sortable": true,
                  "strictWidth": false,
                  "style": {
                    "classes": ""
                  },
                  "toggleSwitch": {
                    "color": {
                      "selected": "",
                      "unselected": ""
                    }
                  },
                  "viewParams": {},
                  "viewPath": "",
                  "visible": true,
                  "width": ""
                }
              ]
            },
            "type": "ia.display.table"
          }
        ],
        "meta": {
          "name": "Reasons"
        },
        "position": {
          "basis": "20px",
          "display": false,
          "grow": 1,
          "shrink": 0
        },
        "props": {
          "style": {
            "classes": "Global/MarginBottom TextFields/TextFieldAlternate",
            "overflow": "hidden"
          },
          "wrap": "wrap"
        },
        "type": "ia.container.flex"
      },
      {
        "children": [
          {
            "events": {
              "dom": {
                "onClick": {
                  "config": {
                    "script": "#\timport time\n\tlogger \u003d system.util.getLogger(\u0027currentCallPopup\u0027)\n\n\ttry:\n\t\ttagPath \u003d self.view.params.EqPath\n\t\tmodesDict \u003d self.view.custom.Modes\n\t\tmode \u003d self.view.custom.CurrentCallMode\n\t\tcurrentCall \u003d self.view.custom.CurrentCall\n\t\t\n\t\tif currentCall \u003d\u003d \u0027Maintenance Called\u0027: mes.oee.mode.setModeMaintenanceInProgress(tagPath)\n\t\tif currentCall \u003d\u003d \u0027Quality Called\u0027: mes.oee.mode.setModeQualityInProgress(tagPath)\n\t\tif currentCall \u003d\u003d \u0027Team Lead Called\u0027: mes.oee.mode.setModeTeamLeadInProgress(tagPath)\n#\t\ttime.sleep(1)\n#\t\tsystem.perspective.sendMessage(\u0027setInProgress\u0027)\n#\t\tself.view.refreshBinding(\u0027custom.CurrentCallMode\u0027)\n#\t\tself.view.params.InProgress \u003d 1\t\t\n\texcept Exception as Argument:\n\t\tlogger.warn(str(Argument))\n\tfinally:\n\t\tsystem.perspective.sendMessage(\u0027setInProgress\u0027)\n\t\tself.view.refreshBinding(\u0027custom.CurrentCallMode\u0027)\n\t\tself.view.params.InProgress \u003d 1\t\t\n\t\t\n\t\n\t"
                  },
                  "scope": "G",
                  "type": "script"
                }
              }
            },
            "meta": {
              "name": "InProgButton"
            },
            "props": {
              "params": {
                "BackgroundColor": "value",
                "DisabledPopup": {
                  "message": "Please sign in as quarterback to proceed.",
                  "messageType": "",
                  "payload": {},
                  "title": "Invalid Permissions"
                },
                "Enabled": true,
                "Hover": true,
                "IconPath": "material/save",
                "IsSelectable": false,
                "Label": "Set In Progress",
                "Selected": true,
                "Size": "value",
                "Type": "value"
              },
              "path": "GlobalComponents/Buttons/Button"
            },
            "type": "ia.display.view"
          }
        ],
        "meta": {
          "name": "Button"
        },
        "props": {
          "justify": "center"
        },
        "type": "ia.container.flex"
      }
    ],
    "meta": {
      "name": "root"
    },
    "props": {
      "direction": "column"
    },
    "type": "ia.container.flex"
  }
}